<div class="container">
    <div class="row mb-3 mt-3 justify-content-end">
        <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
            <form novalidate [formGroup]="searchForm">
                <div class="form-group row">
                    <div class="col-sm-12">
                        <div class="input-group">
                            <input type="text" id="q" formControlName="q" class="form-control" placeholder="Search" aria-describedby="basic-addon2" />
                            <span class="input-group-addon" id="basic-addon2">
                                <i class="fa fa-search" aria-hidden="true"></i>
                            </span>
                        </div>

                    </div>

                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 col-lg-3 col-sm-3 col-xs-12">
            <h4>Refine Search</h4>
            <form novalidate [formGroup]="searchForm">
                <div class="form-group row">
                    <div class="col-sm-12">
                        <label for="category" class="form-control-label">Category</label>
                        <select id="category" formControlName="category" class="form-control">
                        <option value="">All Categories</option>
                        <optgroup *ngFor="let parent of categories" [label]="parent.name">
                            <option *ngFor="let category of parent.children" [ngValue]="category._id">{{category.name}}</option>
                        </optgroup>
                    </select>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-12">
                        <label for="country" class="form-control-label">Locations</label>
                        <select id="country" formControlName="country" class="form-control">
                        <option value="">All Countries</option>
                        <option *ngFor="let country of countries" [ngValue]="country.code.toString()">{{country.name}}</option>
                    </select>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-sm-12">
                        <label for="currency" class="form-control-label">Currency</label>
                        <select id="currency" formControlName="currency" class="form-control">                       
                        <option *ngFor="let currency of currencies" [ngValue]="currency.ccyNbr.toString()" class="iso-currency">{{currency.ccy}}</option>
                    </select>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="minPrice" class="form-control-label">Min Price</label>
                        <input type="number" id="minPrice" name="minPrice" formControlName="minPrice" class="form-control" placeholder="Min Price"
                        />
                    </div>
                    <div class="col-sm-6">
                        <label for="maxPrice" class="form-control-label">Max Price</label>
                        <input type="number" id="maxPrice" name="maxPrice" formControlName="maxPrice" class="form-control" placeholder="Max Price"
                        />
                    </div>
                </div>
                <fieldset class="form-group row">
                    <legend class="col-form-legend col-sm-12">Advert Type</legend>
                    <div class="col-sm-12">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                              <input  class="form-check-input" [checked]="!searchForm.get('advertType').value" type="radio" value="" formControlName="advertType"> All
                             </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                              <input  class="form-check-input" [checked]="searchForm.get('advertType').value === 'sell'" type="radio" value="sell" formControlName="advertType"> For Sale
                             </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                             <input  class="form-check-input" [checked]="searchForm.get('advertType').value === 'buy'" type="radio" value="buy" formControlName="advertType"> Wanted
                             </label>
                        </div>
                    </div>
                </fieldset>
                <div class="form-group row">
                    <div class="col">
                        <a href="javascript:void(0)" (click)="clearSearch()">Clear Search</a>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-sm-12 col-lg-9 col-xs-12 col-md-9">
            <div class="row">
                <div *ngFor="let classified of classifieds | async" class="col-lg-4 col-sm-6 col-xs-12 col-md-4">
                    <a class="card-link" [routerLink]="['/classifieds/details', classified._id]">
                        <div class="card mb-3">
                            <img class="card-img-top img-fluid" style="max-height: 200px;" src="{{classified.image?.path}}">
                            <div class="card-block">
                                <h6 class="card-title text-truncate">{{ classified.title }}</h6>
                                <p class="card-text">
                                    <span class="iso-currency" [ngClass]="classified.price?.ccy"></span>{{ (classified.price?.value.$numberDecimal
                                    | number : '1.2-2') || 'N/A' }}
                                </p>
                                <div class="row">
                                    <div class="col-sm-9">
                                        <p class="card-text pt-3">
                                            <small class="text-muted">Posted {{classified.created | date : 'dd-MM-yyyy HH:mm'}}</small>
                                        </p>
                                    </div>
                                    <div class="col-sm-3">
                                        <span class="favourite pull-right" [ngClass]="{ 'saved': classified.favourite }" (click)="onFavourite($event, classified)">
                                     <span class="star"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-sm-12">
                    <div class="jumbotron" *ngIf="(classifieds | async)?.length==0">
                        <h2 class="display-4">No Records Found....</h2>
                        <p class="lead">Please change your search criteria</p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>