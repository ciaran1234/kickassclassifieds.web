<div class="container pt-3">
    <ng-container *ngIf="user">
        <form novalidate (ngSubmit)="onSubmit(form)" [formGroup]="form">
            <fieldset>
                <legend>
                    My Profile
                </legend>
                <div class="form-group row">
                    <div class="col-sm-4">
                        <img class="img-fluid mx-200" src="{{user?.profileImageUrl}}">
                        <input type="file" name="profileImageUrl" (change)="onFileChange($event)" placeholder="Upload file" accept=".png, .jpg, .jpeg, .gif">
                    </div>
                    <div class="col-sm-8">
                        <div class="row">
                            <div class="col-sm-6 mb-3" [ngClass]="{ 'has-danger': !form.controls['firstName'].valid && (form.controls['firstName'].touched) }">
                                <label for="firstName" class="form-control-label">First Name</label>
                                <input id="firstName" class="form-control" placeholder="First Name" type="text" formControlName="firstName" />
                                <div class="form-control-feedback" *ngIf="form.get('firstName').hasError('required') && (form.get('firstName').touched)">
                                    First Name is required
                                </div>
                                <div class="form-control-feedback" *ngIf="form.get('firstName').hasError('maxlength') && (form.get('firstName').touched)">
                                    Max length of 30 characters for First Name
                                </div>
                            </div>
                            <div class="col-sm-6 mb-3" [ngClass]="{ 'has-danger': !form.controls['lastName'].valid && (form.controls['lastName'].touched) }">
                                <label for="lastName" class="form-control-label">Last Name</label>
                                <input id="lastName" class="form-control" placeholder="Last Name" type="text" formControlName="lastName" />
                                <div class="form-control-feedback" *ngIf="form.get('lastName').hasError('required') && (form.get('lastName').touched)">
                                    Last Name is required
                                </div>
                                <div class="form-control-feedback" *ngIf="form.get('lastName').hasError('maxlength') && (form.get('lastName').touched)">
                                    Max length of 40 characters for Last Name
                                </div>
                            </div>
                            <div class="col-sm-12 mb-3">
                                <label for="email" class="form-control-label">Email</label>
                                <div class="input-group">
                                    <span class="input-group-addon" id="basic-addon2">
                                      <i class="fa fa-envelope-o" aria-hidden="true"></i>
                                   </span>
                                    <input id="email" name="email" type="email" class="form-control" formControlName="email" placeholder="Email" />
                                </div>
                            </div>
                            <div class="col-sm-12 mb-3" [ngClass]="{ 'has-danger': !form.controls['phoneNumber'].valid && (form.controls['phoneNumber'].touched) }">
                                <label for="phoneNumber" class="form-control-label">Phone Number</label>
                                <div class="input-group">
                                    <span class="input-group-addon" id="phone-addon">
                                        <i class="fa fa-phone" aria-hidden="true"></i>
                                    </span>
                                    <input id="phoneNumber" name="phoneNumber" type="tel" class="form-control" formControlName="phoneNumber" placeholder="Phone Number"
                                    />
                                </div>
                                <div class="form-control-feedback" *ngIf="form.get('phoneNumber').hasError('maxlength') && (form.get('phoneNumber').touched)">
                                    Max length of 15 characters for Phone Number
                                </div>
                            </div>
                            <div class="col-sm-12 mb-3">
                                <button class="btn btn-primary" type="submit">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset class="mt-3">
                <legend>Social Logins</legend>
                <ul class="list-group" *ngFor="let externalLogin of externalLogins">
                    <li class="list-group-item">
                        <span class="fa-stack fa-lg">
                              <i class="fa fa-square fa-stack-2x"></i>
                              <i class="fa fa-stack-1x fa-inverse" [ngClass]="'fa-'+externalLogin.loginProvider"></i>
                        </span>
                        <ng-container *ngIf="!externalLogin.providerKey">
                            <button type="button" class="btn btn-primary" (click)="onAddExternalLogin(externalLogin)"> Connect</button>
                        </ng-container>
                        <ng-container *ngIf="externalLogin.providerKey">
                            <button type="button" class="btn btn-danger" (click)="onRemoveExternalLogin(externalLogin)"> Disconnect</button>
                        </ng-container>
                    </li>
                </ul>
            </fieldset>
        </form>
    </ng-container>
</div>